{"version":3,"file":"bundle.js","sources":["../js/inlinePhotoswipe.js","../js/photoswipeFromDom.js","../js/index.js"],"sourcesContent":["class InlinePhotoswipe {\n  constructor(pswpNode, items) {\n    this.pswpNode = pswpNode || null;\n    this.items = items || [];\n\n    this.options = {\n      index: 0,\n      history: false,\n      focus: false,\n      modal: false,\n      closeOnScroll: false,\n      closeOnVerticalDrag: false,\n      closeEl: false,\n      closeElClasses: [],\n      shareEl: false,\n      shareButtons: [],\n    };\n  \n    this.photoSwipeInst = null;\n  }\n\n  init() {\n    if (!this.pswpNode || this.items.length === 0) return;\n\n    // Initializes and opens PhotoSwipe\n    this.photoSwipeInst = new PhotoSwipe(this.pswpNode, PhotoSwipeUI_Default, this.items, this.options);\n    this.photoSwipeInst.init();\n\n    this.photoSwipeInst.listen('afterChange', function () {\n      const curItem = this.currItem;\n      // slide to one video item and autoplay video\n      if (curItem.videosrc) {\n        const videoNode = curItem.container.children[0];\n        setTimeout(() => {\n          videoNode && videoNode.play();\n        }, 500);\n      }\n      // slide to a not video item pause all video items\n      else {\n        // container\n        const parentNode = curItem.container.parentNode.parentNode;\n        const videoList = parentNode.querySelectorAll('video');\n        videoList.forEach(vi => {\n          vi.pause();\n        });\n      }\n    });\n  }\n}\n\nexport default InlinePhotoswipe;","var initPhotoSwipeFromDOM = function (gallerySelector) {\n\n  // parse slide data (url, title, size ...) from DOM elements \n  // (children of gallerySelector)\n  var parseThumbnailElements = function (el) {\n    var thumbElements = el.childNodes,\n      numNodes = thumbElements.length,\n      items = [],\n      figureEl,\n      linkEl,\n      size,\n      item;\n\n    for (var i = 0; i < numNodes; i++) {\n\n      figureEl = thumbElements[i]; // <figure> element\n\n      // include only element nodes \n      if (figureEl.nodeType !== 1) {\n        continue;\n      }\n\n      linkEl = figureEl.children[0]; // <a> element\n\n      size = linkEl.getAttribute('data-size').split('x');\n\n      // create slide object\n      item = {\n        src: linkEl.getAttribute('href'),\n        w: parseInt(size[0], 10),\n        h: parseInt(size[1], 10)\n      };\n\n\n\n      if (figureEl.children.length > 1) {\n        // <figcaption> content\n        item.title = figureEl.children[1].innerHTML;\n      }\n\n      if (linkEl.children.length > 0) {\n        // <img> thumbnail element, retrieving thumbnail url\n        item.msrc = linkEl.children[0].getAttribute('src');\n      }\n\n      item.el = figureEl; // save link to element for getThumbBoundsFn\n      items.push(item);\n    }\n\n    return items;\n  };\n\n  // find nearest parent element\n  var closest = function closest(el, fn) {\n    return el && (fn(el) ? el : closest(el.parentNode, fn));\n  };\n\n  // triggers when user clicks on thumbnail\n  var onThumbnailsClick = function (e) {\n    e = e || window.event;\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n\n    var eTarget = e.target || e.srcElement;\n\n    // find root element of slide\n    var clickedListItem = closest(eTarget, function (el) {\n      return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');\n    });\n\n    if (!clickedListItem) {\n      return;\n    }\n\n    // find index of clicked item by looping through all child nodes\n    // alternatively, you may define index via data- attribute\n    var clickedGallery = clickedListItem.parentNode,\n      childNodes = clickedListItem.parentNode.childNodes,\n      numChildNodes = childNodes.length,\n      nodeIndex = 0,\n      index;\n\n    for (var i = 0; i < numChildNodes; i++) {\n      if (childNodes[i].nodeType !== 1) {\n        continue;\n      }\n\n      if (childNodes[i] === clickedListItem) {\n        index = nodeIndex;\n        break;\n      }\n      nodeIndex++;\n    }\n\n\n\n    if (index >= 0) {\n      // open PhotoSwipe if valid index found\n      openPhotoSwipe(index, clickedGallery);\n    }\n    return false;\n  };\n\n  // parse picture index and gallery index from URL (#&pid=1&gid=2)\n  var photoswipeParseHash = function () {\n    var hash = window.location.hash.substring(1),\n      params = {};\n\n    if (hash.length < 5) {\n      return params;\n    }\n\n    var vars = hash.split('&');\n    for (var i = 0; i < vars.length; i++) {\n      if (!vars[i]) {\n        continue;\n      }\n      var pair = vars[i].split('=');\n      if (pair.length < 2) {\n        continue;\n      }\n      params[pair[0]] = pair[1];\n    }\n\n    if (params.gid) {\n      params.gid = parseInt(params.gid, 10);\n    }\n\n    return params;\n  };\n\n  var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {\n    var pswpElement = document.querySelectorAll('.pswp')[0],\n      gallery,\n      options,\n      items;\n\n    items = parseThumbnailElements(galleryElement);\n\n    // define options (if needed)\n    options = {\n\n      // define gallery index (for URL)\n      galleryUID: galleryElement.getAttribute('data-pswp-uid'),\n\n      getThumbBoundsFn: function (index) {\n        // See Options -> getThumbBoundsFn section of documentation for more info\n        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail\n          pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n          rect = thumbnail.getBoundingClientRect();\n\n        return { x: rect.left, y: rect.top + pageYScroll, w: rect.width };\n      }\n\n    };\n\n    // PhotoSwipe opened from URL\n    if (fromURL) {\n      if (options.galleryPIDs) {\n        // parse real index when custom PIDs are used \n        // http://photoswipe.com/documentation/faq.html#custom-pid-in-url\n        for (var j = 0; j < items.length; j++) {\n          if (items[j].pid == index) {\n            options.index = j;\n            break;\n          }\n        }\n      } else {\n        // in URL indexes start from 1\n        options.index = parseInt(index, 10) - 1;\n      }\n    } else {\n      options.index = parseInt(index, 10);\n    }\n\n    // exit if index not found\n    if (isNaN(options.index)) {\n      return;\n    }\n\n    if (disableAnimation) {\n      options.showAnimationDuration = 0;\n    }\n\n    // Pass data to PhotoSwipe and initialize it\n    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n    gallery.init();\n  };\n\n  // loop through all gallery elements and bind events\n  var galleryElements = document.querySelectorAll(gallerySelector);\n\n  for (var i = 0, l = galleryElements.length; i < l; i++) {\n    galleryElements[i].setAttribute('data-pswp-uid', i + 1);\n    galleryElements[i].onclick = onThumbnailsClick;\n  }\n\n  // console.log('galleryElements =>', galleryElements);\n\n  // Parse URL and open gallery if it contains #&pid=3&gid=1\n  var hashData = photoswipeParseHash();\n  if (hashData.pid && hashData.gid) {\n    openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);\n  }\n};\n\nexport default initPhotoSwipeFromDOM;","import photoswipeFromDom from './photoswipeFromDom';\nimport inlinePhotoswipe from './inlinePhotoswipe';\n\nphotoswipeFromDom('.showcase-gallery');\n\nconst inlineShowcaseEles = document.querySelectorAll('.showcase-gallery__inline');\n\nconst midAutumnSlides = [\n  {\n    src: 'assets/yqt/campaign/mid-autumn/index.jpg',\n    w: 562,\n    h: 1218,\n    title: '活動首頁'\n  },\n  {\n    src: 'assets/yqt/campaign/mid-autumn/produce.jpg',\n    w: 562,\n    h: 1218\n  },\n  {\n    src: 'assets/yqt/campaign/mid-autumn/poster.jpg',\n    w: 562,\n    h: 1218\n  },\n];\n\nconst thanksgivingSlides = [\n  {\n    src: 'assets/yqt/campaign/thanksgiving/index.jpg',\n    w: 562,\n    h: 1218,\n    title: '活動首頁'\n  },\n  {\n    src: 'assets/yqt/campaign/thanksgiving/message.jpg',\n    w: 562,\n    h: 1218\n  },\n  {\n    src: 'assets/yqt/campaign/thanksgiving/letter.jpg',\n    w: 562,\n    h: 1218\n  },\n  {\n    videosrc: 'assets/yqt/campaign/thanksgiving/RPReplay_Final1607095077.mp4',\n    w: 562,\n    h: 1218,\n    html: `<video controls muted disablePictureInPicture controlsList=\"nodownload\" ` +\n      `poster=\"assets/yqt/campaign/thanksgiving/letter.jpg\">` +\n      `<source src=\"assets/yqt/campaign/thanksgiving/RPReplay_Final1607095077.mp4\" type=\"video/mp4\">` +\n      `</video>`,\n  }\n];\n\nconst wxgoldSlides = [\n  {\n    src: 'assets/wxgold/IMG_1566.jpg',\n    w: 562,\n    h: 1218,\n    title: '金沙紅包'\n  },\n  {\n    src: 'assets/wxgold/IMG_1567.jpg',\n    w: 562,\n    h: 1218\n  },\n  {\n    src: 'assets/wxgold/IMG_1554.jpg',\n    w: 562,\n    h: 1218\n  },\n  {\n    videosrc: 'assets/wxgold/RPReplay_Final1561480690.mp4',\n    w: 562,\n    h: 1218,\n    html: `<video controls muted disablePictureInPicture controlsList=\"nodownload\"\b>` +\n      `<source src=\"assets/wxgold/RPReplay_Final1561480690.mp4\" type=\"video/mp4\">` +\n      `</video>`,\n  }\n];\n\ninlineShowcaseEles.forEach(el => {\n  if (el.dataset.slide === 'mid-autumn') {\n    new inlinePhotoswipe(el, midAutumnSlides).init();\n  } else if (el.dataset.slide === 'thanksgiving') {\n    new inlinePhotoswipe(el, thanksgivingSlides).init();\n  } else if (el.dataset.slide === 'wxgold') {\n    new inlinePhotoswipe(el, wxgoldSlides).init();\n  }\n});\n"],"names":["InlinePhotoswipe","pswpNode","items","options","index","history","focus","modal","closeOnScroll","closeOnVerticalDrag","closeEl","closeElClasses","shareEl","shareButtons","photoSwipeInst","this","length","PhotoSwipe","PhotoSwipeUI_Default","init","listen","curItem","currItem","videosrc","videoNode","container","children","setTimeout","play","parentNode","querySelectorAll","forEach","vi","pause","gallerySelector","closest","el","fn","onThumbnailsClick","e","window","event","preventDefault","returnValue","eTarget","target","srcElement","clickedListItem","tagName","toUpperCase","clickedGallery","childNodes","numChildNodes","nodeIndex","i","nodeType","openPhotoSwipe","galleryElement","disableAnimation","fromURL","pswpElement","document","figureEl","linkEl","size","item","thumbElements","numNodes","getAttribute","split","src","w","parseInt","h","title","innerHTML","msrc","push","parseThumbnailElements","galleryUID","getThumbBoundsFn","thumbnail","getElementsByTagName","pageYScroll","pageYOffset","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","width","galleryPIDs","j","pid","isNaN","showAnimationDuration","galleryElements","l","setAttribute","onclick","hashData","hash","location","substring","params","vars","pair","gid","photoswipeParseHash","photoswipeFromDom","inlineShowcaseEles","midAutumnSlides","thanksgivingSlides","html","wxgoldSlides","dataset","slide","inlinePhotoswipe"],"mappings":"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"}